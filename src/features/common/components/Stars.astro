<!-- Code extracted from ManzDev Video = https://www.youtube.com/watch?v=NXiFWpTB2Ug -->
<div class="container">
	<div class="space space-1"></div>
	<div class="space space-2"></div>
	<div class="space space-3"></div>
</div>
<script>
	import { $ } from '@/features/common/lib/dom';

	const COLORS = ['#fff2', '#fff4', '#fff7', '#fffc'];
	document.addEventListener('astro:page-load', () => {
		const generateSpaceLayer = (
			size: string,
			selector: string,
			totalStars: number,
			duration: string,
		) => {
			const layer = [];
			for (let i = 0; i < totalStars; i++) {
				const color = COLORS[~~(Math.random() * COLORS.length)];
				const x = Math.floor(Math.random() * 100);
				const y = Math.floor(Math.random() * 100);
				layer.push(`${x}vw ${y}vh 0 ${color}, ${x}vw ${y + 100}vh 0 ${color}`);
			}
			const container = $(selector) as HTMLDivElement;
			container.style.setProperty('--size', size);
			container.style.setProperty('--duration', duration);
			container.style.setProperty('--space-layer', layer.join(','));
			// console.log(layer.join(','));
		};

		generateSpaceLayer('2px', '.space-1', 250, '160s');
		generateSpaceLayer('3px', '.space-2', 100, '140s');
		generateSpaceLayer('6px', '.space-3', 25, '120s');
	});
</script>
