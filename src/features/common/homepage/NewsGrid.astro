---
/**
 * NewsGrid Component
 * Mixed content display for homepage
 * Shows new resources, featured resources, and collections in a responsive grid
 */

import CardItem from '@/features/common/cards/CardItem.astro';
import CollectionCard from './CollectionCard.astro';
import { Button } from '@/features/ui/button';
import { Badge } from '@/features/ui/badge';
import { slugify } from '@/features/common/lib/utils';
import { HOMEPAGE, NAV } from '@/features/common/consts/text';

interface NewsItem {
	type: 'resource' | 'collection';
	data: any;
}

interface Props {
	items: NewsItem[];
}

const { items } = Astro.props;
---

<section class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16">
	<!-- Section Header with Badge and View All Link -->
	<div class="flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-4">
		<div class="flex items-center gap-3">
			<h2 class="text-4xl md:text-5xl font-bold bg-[var(--accent-gradient)] bg-clip-text text-transparent">
				{HOMEPAGE.popularResources.heading}
			</h2>
			<Badge variant="default" size="sm">{HOMEPAGE.popularResources.badge}</Badge>
		</div>
		<a href="/categories/all/1" class="text-primary font-medium hover:opacity-80 transition-opacity whitespace-nowrap">
			{NAV.viewAll}
		</a>
	</div>
	<p class="text-foreground/60 text-lg mb-8">
		{HOMEPAGE.popularResources.subtitle}
	</p>

	<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
		{
			items.map((item) => {
				if (item.type === 'collection') {
					return (
						<CollectionCard
							name={item.data.name}
							description={item.data.description}
							url={`/collections/${slugify(item.data.name)}/`}
							image={item.data.img}
							itemCount={
								item.data.data
									? item.data.data.length
									: 0
							}
						/>
					);
				} else {
					return (
						<CardItem
							name={item.data.name}
							description={item.data.description}
							link={item.data.url}
							image={item.data.image || ''}
							ogImage={
								item.data.og?.image ||
								'https://placehold.co/600x400'
							}
							ogDescription={item.data.og?.description}
							tags={item.data.tags}
						/>
					);
				}
			})
		}
	</div>
</section>
