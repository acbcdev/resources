---
import type { HTMLAttributes } from "astro/types";
import { tv, type VariantProps } from "tailwind-variants";

type Props = HTMLAttributes<"input"> & VariantProps<typeof input>;

export const input = tv({
	base: [
		"border-input bg-input text-foreground w-full rounded-lg border",
		"starwind-transition-colors",
		"focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",
		"file:text-foreground file:my-auto file:mr-4 file:h-full file:border-0 file:bg-transparent file:text-sm file:font-medium",
		"disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-muted",
		"placeholder:text-muted-foreground",
	],
	variants: {
		size: {
			sm: "h-9 px-3 text-sm",
			md: "h-11 px-4 text-base",
			lg: "h-12 px-4 text-lg",
		},
		error: {
			true: "border-destructive text-destructive focus:border-destructive focus:ring-destructive",
			false: "",
		},
	},
	defaultVariants: { size: "md", error: false },
});

const { size, error, class: className, ...rest } = Astro.props;
---

<input class={input({ size, error, class: className })} data-slot="input" aria-invalid={error ? "true" : undefined} {...rest} />
