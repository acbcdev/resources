---
import type { HTMLAttributes } from "astro/types";
import { tv, type VariantProps } from "tailwind-variants";

type Props = HTMLAttributes<"textarea"> & VariantProps<typeof textarea>;

export const textarea = tv({
	base: [
		"border-input bg-input text-foreground min-h-24 w-full rounded-lg border resize-none",
		"starwind-transition-colors",
		"focus:border-primary focus:outline-none focus:ring-1 focus:ring-primary",
		"disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-muted",
		"placeholder:text-muted-foreground",
	],
	variants: {
		size: {
			sm: "min-h-20 px-3 py-2 text-sm",
			md: "min-h-24 px-4 py-3 text-base",
			lg: "min-h-32 px-4 py-3 text-lg",
		},
		error: {
			true: "border-destructive text-destructive focus:border-destructive focus:ring-destructive",
			false: "",
		},
	},
	defaultVariants: { size: "md", error: false },
});

const { size, error, class: className, ...rest } = Astro.props;
---

<textarea
	class={textarea({ size, error, class: className })}
	data-slot="textarea"
	aria-invalid={error ? "true" : undefined}
	{...rest}></textarea>
